{"meta":{"title":"宁宁的大图书馆","subtitle":"","description":"","author":"Ayachi Nene","url":"https://kahuuchino.github.io","root":"/"},"pages":[{"title":"朋友","date":"2023-05-08T12:41:30.890Z","updated":"2023-05-08T12:41:30.890Z","comments":true,"path":"PY.html","permalink":"https://kahuuchino.github.io/PY.html","excerpt":"","text":"谢谢，克拉拉会记得你的。 友情链接 添加友链 名称：田所浩二介绍：有在健身，喜欢红茶链接：https://n114514.com/LOGO：https://1919810.jpg 需要更新头像或者链接请email到&#107;&#97;&#104;&#117;&#x75;&#99;&#104;&#x69;&#110;&#111;&#64;&#x71;&#x71;&#x2e;&#99;&#x6f;&#x6d;，懒狗是不会去做评论系统的"},{"title":"关于","date":"2023-05-08T12:36:23.581Z","updated":"2023-05-08T12:36:23.581Z","comments":true,"path":"about.html","permalink":"https://kahuuchino.github.io/about.html","excerpt":"","text":"介绍计算机体系结构方向，主攻FPGA应用，软件能力为0 博客大事记 2023&#x2F;5&#x2F;8 懒狗终于把这玩意弄完了"}],"posts":[{"title":"Linux kernel内核编译记录","slug":"Linux-kernel-compile","date":"2023-05-08T09:08:02.000Z","updated":"2023-05-08T12:38:59.210Z","comments":true,"path":"2023/05/08/Linux-kernel-compile/","link":"","permalink":"https://kahuuchino.github.io/2023/05/08/Linux-kernel-compile/","excerpt":"","text":"linux 内核编译版本4.15.0， ubuntu16.04默认内核为4.15.0-38-generic genheaders.c头文件引用出错问题描述12In file included from scripts/selinux/genheaders/genheaders.c:19:./security/selinux/include/classmap.h:248:2: error: #error New address family defined, please update secclass_map. 解决方法打开.h文件，添加头文件#include &lt;linux&#x2F;socket.h&gt;打开.c文件，注释#include&lt;sys&#x2F;socket.h&gt; pager_preexec参数调用有误问题描述123pager.c: In function ‘pager_preexec’:pager.c:36:12: error: passing argument 2 to restrict-qualified parameter aliases with argument 4 [-Werror=restrict] select(1, &amp;in, NULL, &amp;in, NULL); 解决方法寻找高版本文件，更新对应函数，这个被定为bug 12345678910111213141516171819static void pager_preexec(void)&#123; /* * Work around bug in &quot;less&quot; by not starting it until we * have real input */ fd_set in; fd_set exception; FD_ZERO(&amp;in); FD_ZERO(&amp;exception); FD_SET(0, &amp;in); FD_SET(0, &amp;exception); select(1, &amp;in, NULL, &amp;exception, NULL); setenv(&quot;LESS&quot;, &quot;FRSX&quot;, 0);&#125; elf_getshnum重定义问题描述1orc_dump.c:106:9: error: ‘elf_getshnum’ is deprecated [-Werror=deprecated-declarations] 解决方法又是一个在高版本被修复的bug https://bugzilla.kernel.org/show_bug.cgi?id=197847 1234567891011--- tools/objtool/Makefile 2017-11-11 14:55:08.243236243 +0000+++ tools/objtool/Makefile.new 2017-11-11 14:56:52.322443760 +0000@@ -29,7 +29,7 @@ LDFLAGS += -lelf $(LIBSUBCMD) # Allow old libelf to be used:- elfshdr := $(shell echo &#x27;\\#include &lt;libelf.h&gt;&#x27; | $(CC) $(CFLAGS) -x c -E - | grep elf_getshdr)+ elfshdr := $(shell echo &#x27;#include &lt;libelf.h&gt;&#x27; | $(CC) $(CFLAGS) -x c -E - | grep elf_getshdr) CFLAGS += $(if $(elfshdr),,-DLIBELF_USE_DEPRECATED) AWK = awk 123456789101112--- tools/build/Build.include 2017-11-11 14:57:12.862287367 +0000+++ tools/build/Build.include.new 2017-11-11 14:56:37.232558659 +0000@@ -62,8 +62,8 @@ $(fixdep) $(depfile) $@ &#x27;$(make-cmd)&#x27; &gt; $(dot-target).tmp; \\ rm -f $(depfile); \\ mv -f $(dot-target).tmp $(dot-target).cmd, \\- printf &#x27;# cannot find fixdep (%s)\\n&#x27; $(fixdep) &gt; $(dot-target).cmd; \\- printf &#x27;# using basic dep data\\n\\n&#x27; &gt;&gt; $(dot-target).cmd; \\+ printf &#x27;\\# cannot find fixdep (%s)\\n&#x27; $(fixdep) &gt; $(dot-target).cmd; \\+ printf &#x27;\\# using basic dep data\\n\\n&#x27; &gt;&gt; $(dot-target).cmd; \\ cat $(depfile) &gt;&gt; $(dot-target).cmd; \\ printf &#x27;\\n%s\\n&#x27; &#x27;cmd_$@ := $(make-cmd)&#x27; &gt;&gt; $(dot-target).cmd) openssl宏重定义问题描述1scripts/sign-file.c:89:9: warning: ‘ERR_get_error_line’ is deprecated: Since OpenSSL 3.0 [-Wdeprecated-declarations] 解决方法这个api在openssl3.0已被弃用，但社区懒得支持，在sign-file.c中添加编译器指令忽略重定义问题 123456/* * OpenSSL 3.0 deprecates the OpenSSL&#x27;s ENGINE API. * * Remove this if/when that API is no longer used */#pragma GCC diagnostic ignored &quot;-Wdeprecated-declarations&quot; objtool符号表未命中问题描述1arch/x86/entry/.tmp_thunk_64.o: warning: objtool: missing symbol table 解决方法更新后这玩意可能会空，因此把错误处理代码替换为return 0 https://www.spinics.net/lists/kernel/msg3797871.html QEMU启动时提示处理器不支持LA57特性https://lkml.kernel.org/lkml/20190225195122.930447522@linuxfoundation.org/4.20的patch修复了这个问题，但是直接按照对应patch更新代码会导致另一个文件编译出错，因此需要下载此patch后更新的4.20.13版本，使用对应的cpuid.c文件进行修改 后续QEMU始终无法启动4.15内核，最后改为使用22.04使用的5.19内核，编译一遍过我究竟在研究什么东西…","categories":[{"name":"Linux","slug":"Linux","permalink":"https://kahuuchino.github.io/categories/Linux/"}],"tags":[]}],"categories":[{"name":"Linux","slug":"Linux","permalink":"https://kahuuchino.github.io/categories/Linux/"}],"tags":[]}